swagger: '2.0'
x-stoplight:
  id: 9a44a49c829b5
info:
  version: 1.1.3
  title: PAYMENT CREDENTIALS
  description: |
    ## Using the API

    To use the API you must ask for your Kushki Sandbox, composed of a `Public-Merchant-Id` and a `Private-Merchant-Id`.

    * The current version of the Kushki API rests at: `https://api.kushkipagos.com/`
    * The testing version rests at: `https://api-uat.kushkipagos.com/`


    ## Endpoints

    We dispose various endpoints to start your payment flows, find our products available:

    * [Create a credential](https://api-docs.kushkipagos.com/docs/online-payments/payment-credentials/operations/create-a-payment-credential-v-1-credential)
    * [Search credentials](https://api-docs.kushkipagos.com/docs/online-payments/payment-credentials/operations/create-a-payment-credential-v-1-credential-search)
    * [Advanced search](https://api-docs.kushkipagos.com/docs/online-payments/payment-credentials/operations/create-a-payment-credential-v-1-credential-suggestion)
    * [Activate or deactivate](https://api-docs.kushkipagos.com/docs/online-payments/payment-credentials/operations/modify-a-payment-credential-v-1-credential-status)
    * [Delete credential](https://api-docs.kushkipagos.com/docs/online-payments/payment-credentials/operations/delete-a-payment-credential-v-1-credential)
    * [Update credential](https://api-docs.kushkipagos.com/docs/online-payments/payment-credentials/operations/modify-a-payment-credential-v-1-credential)
    * [Regenerate a credential](https://api-docs.kushkipagos.com/docs/online-payments/payment-credentials/operations/modify-a-payment-credential-v-1-credential-recover)

    [Return Home](/)

    > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
host: api-uat.kushkipagos.com
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
securityDefinitions:
  oauth2:
    type: oauth2
    flow: implicit
    scopes: {}
    authorizationUrl: ''
paths:
  /payment-credentials/v1/credential:
    post:
      summary: Create a credential
      operationId: create credential
      parameters:
        - in: header
          name: Private-key
          type: string
          required: true
          description: It must belong to a main credential
        - in: header
          name: Content-Type
          type: string
          description: application/json
          required: true
        - in: body
          name: body
          schema:
            type: object
            properties:
              alias:
                type: string
                default: ''
              enable:
                type: boolean
                default: false
              hidden:
                type: boolean
              merchant_id:
                type: string
              metadata:
                $ref: ../models/Metadata.yaml
            required:
              - merchant_id
          x-examples:
            Create a credential:
              alias: Credencial de prueba
              enable: true
              hidden: true
              merchant_id: '20000000128419070000'
              metadata:
                key1: '9006'
                key2: '52727'
      responses:
        '201':
          description: ''
          schema:
            type: object
            properties:
              alias:
                type: string
              credential_id:
                type: string
              metadata:
                $ref: ../models/Metadata.yaml
              private_credential_id:
                type: string
              public_credential_id:
                type: string
            required:
              - alias
              - credential_id
              - metadata
              - private_credential_id
              - public_credential_id
          examples:
            Credential created:
              alias: Credencial de prueba
              credential_id: f4c644b64951620ab8952ad58pl63901
              metadata: null
              private_credential_id: c381037a5bfb00f2bd0ee899eb85fllq
              public_credential_id: 345213d7d1c64ba28eb88a3b4f1ab0b9
        '400':
          description: ''
          schema:
            type: object
            properties:
              message:
                type: string
              code:
                type: string
          examples:
            Invalid merchant ID or credential:
              message: ID de comercio o credencial no válido
              code: K004
      description: |-
        This endpoint allows you to create a new credential with its corresponding public and private keys.

        **Note:** to use this endpoint you must obtain first a main or master credential for your merchant. It can be generated by a Credential Master user (available only on demand).

        <!-- theme: warning -->
        > #### Service available in the following countries:
        >
        > Ecuador, Chile, Colombia, México, Perú.  
        > Check out our full [list of services by country](https://api-docs.kushkipagos.com/docs/online-payments/services-by-country)

        > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
      x-stoplight:
        id: 7kue2qghkqk72
  /payment-credentials/v1/credential/search:
    post:
      responses:
        '200':
          description: ''
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  type: object
                  properties:
                    _source:
                      type: object
                      properties:
                        merchantId:
                          type: string
                        privateCredentialId:
                          type: string
                        publicCredentialId:
                          type: string
                        enable:
                          type: boolean
                        alias:
                          type: string
                        created:
                          type: integer
                        deleteAt:
                          type: integer
                        hidden:
                          type: boolean
                        credentialId:
                          type: string
                        type:
                          type: string
              total:
                type: integer
            required:
              - data
              - total
          examples:
            Search credentials:
              data:
                - _source:
                    merchantId: '20000000105723747035'
                    privateCredentialId: c381037a5bfb00f2bd0ee899eb85fllq
                    publicCredentialId: 345213d7d1c64ba28eb88a3b4f1ab0b9
                    enable: true
                    alias: Payment credentials
                    created: 1646955699920
                    deleteAt: 0
                    hidden: false
                    credentialId: f4c644b64951620ab8952ad58pl63901
                    type: master
              total: 7
        '400':
          description: ''
          schema:
            type: object
            properties:
              code:
                type: string
              message:
                type: string
          examples:
            Wrong Merchant ID:
              code: E008
              message: El ID de comercio no corresponde a la credencial enviada
        '401':
          description: ''
          schema:
            type: object
            properties:
              message:
                type: string
          examples:
            Unauthorized:
              message: Unauthorized
      summary: Search credentials
      operationId: Search
      parameters:
        - in: header
          name: Private-key
          type: string
          required: true
          description: It must belong to a main credential
        - in: header
          name: Content-Type
          type: string
          description: application/json
          required: true
        - in: body
          name: body
          schema:
            type: object
            properties:
              limit:
                type: integer
                description: Limit the number of credentials to return.
              offset:
                type: integer
                description: Indicates the position from which it will start
              merchantId:
                type: string
              filter:
                type: object
                description: Filter credentials by specific values
                properties:
                  alias:
                    type: string
                  merchantId:
                    type: string
                  privateCredentialId:
                    type: string
                  publicCredentialId:
                    type: string
                  credentialId:
                    type: string
            required:
              - limit
              - merchantId
          x-examples:
            Without filter:
              limit: 10
              offset: 0
              merchantId: '20000000105723747035'
            With filter:
              limit: 10
              offset: 0
              merchantId: '20000000105723747035'
              filter:
                alias: Credencial de prueba
      description: |-
        This method allows you to search for one or more credentials associated with your merchant.

        **Note:** to use this endpoint you must obtain first a main or master credential for your merchant. It can be generated by a Credential Master user (available only on demand).

        <!-- theme: warning -->
        > #### Service available in the following countries:
        >
        > Ecuador, Chile, Colombia, México, Perú.  
        > Check out our full [list of services by country](https://api-docs.kushkipagos.com/docs/online-payments/services-by-country)

        > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
      x-stoplight:
        id: 4do03wulzqau2
  /payment-credentials/v1/credential/suggestions:
    post:
      responses:
        '200':
          description: ''
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  type: object
                  properties:
                    privateCredentialId:
                      type: string
                    hidden:
                      type: boolean
                    merchantId:
                      type: string
                    deleteAt:
                      type: integer
                    enable:
                      type: boolean
                    created:
                      type: integer
                    alias:
                      type: string
                    credentialId:
                      type: string
                    type:
                      type: string
                    publicCredentialId:
                      type: string
              total:
                type: integer
          examples:
            application/json:
              data:
                - privateCredentialId: c17b3418491f4e29b611671b550c16af
                  hidden: false
                  merchantId: '20000000105723747035'
                  deleteAt: 0
                  enable: true
                  created: 1633834893758
                  alias: Location 3
                  credentialId: 3fb772c889ee4f2d953fc440a20fb7d0
                  type: slave
                  publicCredentialId: 03ba5b51cb1f406e8be9ba0bb97a5229
                - merchantId: '20000000105723747035'
                  privateCredentialId: 80de529107264c179d4b971420122c33
                  publicCredentialId: b28a4e8a8bed488e921ba226b8cad5b2
                  enable: true
                  alias: Location 2
                  created: 1633834886816
                  deleteAt: 0
                  hidden: false
                  credentialId: 5c2af6baa5bb4a3d990728076265c061
                  type: slave
              total: 2
        '403':
          description: ''
          schema:
            type: object
            properties:
              message:
                type: string
          examples:
            Missing Authentication Token:
              message: Missing Authentication Token
            new: {}
      summary: Advanced search
      operationId: Advanced search
      parameters:
        - in: header
          name: Content-Type
          type: string
          default: application/json
          required: true
          description: application/json
        - in: header
          name: Private-key
          type: string
          required: true
          description: It must belong to a main credential
        - in: body
          name: body
          schema:
            type: object
            properties:
              searchTerm:
                type: string
              merchantId:
                type: string
          x-examples:
            application/json:
              searchTerm: Location
              merchantId: '20000000105723747035'
      description: |-
        This method allows you to obtain the details of a given credential by submitting a keyword on it.

        **Note:** to use this endpoint you must obtain first a main or master credential for your merchant. It can be generated by a Credential Master user (available only on demand).

        <!-- theme: warning -->
        > #### Service available in the following countries:
        >
        > Ecuador, Chile, Colombia, México, Perú.  
        > Check out our full [list of services by country](https://api-docs.kushkipagos.com/docs/online-payments/services-by-country)

        > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
      x-stoplight:
        id: 569pz55cz99p9
  '/payment-credentials/v1/credential/status/{credentialId}':
    patch:
      responses:
        '200':
          description: ''
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                message: Credencial Activada
            properties:
              message:
                type: string
            required:
              - message
          examples:
            Credential Activated:
              message: Credencial Activada
            Credential Deactivated:
              message: Credencial Desactivada
        '400':
          description: ''
          examples:
            Credential is already in ACTIVE status:
              code: E008
              message: Credencial ya se encuentra en estado ACTIVO
            Credential is already in INACTIVE state:
              code: E008
              message: Credencial ya se encuentra en estado INACTIVO
            Invalid merchant ID or credential:
              message: ID de comercio o credencial no válido
              code: K004
            Invalid request body:
              code: E003
              message: Cuerpo de la petición no válido
          schema:
            type: object
            properties:
              code:
                type: string
              message:
                type: string
        '404':
          description: ''
          examples:
            Credentials do not exist:
              code: E005
              message: No existen las credenciales
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                code: E005
                message: No existen las credenciales
            properties:
              code:
                type: string
              message:
                type: string
            required:
              - code
              - message
      description: |-
        This method allows you to activate or deactivate a credential.

        **Note:** to use this endpoint you must obtain first a main or master credential for your merchant. It can be generated by a Credential Master user (available only on demand).

        <!-- theme: warning -->
        > #### Service available in the following countries:
        >
        > Ecuador, Chile, Colombia, México, Perú.  
        > Check out our full [list of services by country](https://api-docs.kushkipagos.com/docs/online-payments/services-by-country)

        > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
      operationId: Activate or deactivate
      parameters:
        - in: header
          name: Private-key
          type: string
          required: true
          description: It must belong to a main credential
        - in: body
          name: body
          schema:
            type: object
            properties:
              action:
                type: string
                enum:
                  - ACTIVATE
                  - DEACTIVATE
            required:
              - action
          x-examples:
            application/json:
              action: ACTIVATE
        - in: header
          name: Content-Type
          type: string
          required: true
          description: application/json
      summary: Activate or deactivate
      x-stoplight:
        id: 3yhha8ebuxcmx
    parameters:
      - type: string
        name: credentialId
        in: path
        required: true
  '/payment-credentials/v1/credential/{credentialId}':
    delete:
      responses:
        '200':
          description: Credencial eliminada con éxito
          schema:
            type: object
            properties: {}
          examples: {}
        '400':
          description: ''
          schema:
            type: object
            properties:
              message:
                type: string
              code:
                type: string
          examples:
            Invalid merchant ID or credential:
              message: ID de comercio o credencial no válido
              code: K004
        '401':
          description: ''
          schema:
            type: object
            properties:
              message:
                type: string
          examples:
            Unauthorized:
              message: Unauthorized
      description: |-
        This method allows you to delete a credential so it's no longer usable.

        **Note:** to use this endpoint you must obtain first a main or master credential for your merchant. It can be generated by a Credential Master user (available only on demand).

        <!-- theme: warning -->
        > #### Service available in the following countries:
        >
        > Ecuador, Chile, Colombia, México, Perú.  
        > Check out our full [list of services by country](https://api-docs.kushkipagos.com/docs/online-payments/services-by-country)

        > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
      operationId: Delete credential
      parameters:
        - in: header
          name: Content-Type
          type: string
          required: true
          description: application/json
        - in: header
          name: Private-key
          type: string
          required: true
          description: It must belong to a main (master) credential
      summary: Delete credential
      x-stoplight:
        id: 3l8wtec94na8h
    parameters:
      - type: string
        name: credentialId
        in: path
        required: true
    patch:
      responses:
        '200':
          description: Credencial  actualizada con éxito
        '402':
          description: Payment Required
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                code: E006
                message: El ID de comercio no corresponde a la credencial enviada
            properties:
              code:
                type: string
              message:
                type: string
            required:
              - code
              - message
          examples:
            The merchant ID does not correspond to the credential sent:
              code: E006
              message: El ID de comercio no corresponde a la credencial enviada
        '404':
          description: ''
          schema:
            type: object
            properties:
              code:
                type: string
              message:
                type: string
            required:
              - code
              - message
          examples:
            application/json:
              code: E005
              message: No existen las credenciales
      summary: Update credential
      operationId: Update credential
      description: |-
        This endpoint allows you to update the information (alias or metadata) of a given credential identified by its `credential_id`

        **Note:** to use this endpoint you must obtain first a main or master credential for your merchant. It can be generated by a Credential Master user (available only on demand).

        <!-- theme: warning -->
        > #### Service available in the following countries:
        >
        > Ecuador, Chile, Colombia, México, Perú.  
        > Check out our full [list of services by country](https://api-docs.kushkipagos.com/docs/online-payments/services-by-country)

        > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
      parameters:
        - in: path
          name: credentialId
          type: string
          required: true
        - in: header
          name: Content-Type
          type: string
          default: application/json
          required: true
          description: application/json
        - in: header
          name: Private-key
          type: string
          required: true
          description: It must belong to a main (master) credential
        - in: body
          name: body
          schema:
            type: object
            properties:
              alias:
                type: string
              merchantId:
                type: string
              metadata:
                $ref: ../models/Metadata.yaml
            required:
              - merchantId
          x-examples:
            application/json:
              alias: Location4
              merchantId: '20000000128419070000'
              metadata:
                key1: metadata 1
                key2: RS-1234
      x-stoplight:
        id: gzm3ac428rcu0
  '/payment-credentials/v1/credential/recover/{public_credential_id}':
    patch:
      responses:
        '200':
          description: ''
          schema:
            type: object
          examples:
            application/json: Credencial regenerada con éxito
        '401':
          description: ''
          examples:
            application/json:
              message: Unauthorized
          schema:
            type: object
            properties:
              message:
                type: string
            required:
              - message
        '404':
          description: ''
          schema:
            type: object
            properties:
              code:
                type: string
              message:
                type: string
            required:
              - code
              - message
          examples:
            application/json:
              code: E005
              message: No existen las credenciales
      description: |-
        Generates new public and private keys for a credential identified by its `public_credential_id`. 
        When you use this endpoint, the public and private merchant IDs will be automatically replaced for new credentials in all the integrations when the old credentials are being used.

        **Note:** to use this endpoint you must obtain first a main or master credential for your merchant. It can be generated by a Credential Master user (available only on demand).

        <!-- theme: warning -->
        > #### Service available in the following countries:
        >
        > Ecuador, Chile, Colombia, México, Perú.  
        > Check out our full [list of services by country](https://api-docs.kushkipagos.com/docs/online-payments/services-by-country)

        > Got a suggestion on this documentation? [Contact Us.](mailto:techwriting@kushki.com)
      operationId: RegenerateCredential
      parameters:
        - in: path
          name: public_credential_id
          type: string
          required: true
          description: Public key of the credential to regenerate
        - in: header
          name: Content-Type
          type: string
          description: application/json
          required: true
        - in: header
          name: Private-key
          type: string
          required: true
          description: It must belong to a main credential
      summary: Regenerate a credential
      x-stoplight:
        id: lya1pmgb3zw8d
    parameters:
      - name: public_credential_id
        in: path
        type: string
        required: true
responses:
  'trait:invalidBin:402':
    description: Invalid Bin
    schema:
      $ref: '#/definitions/InvalidBinResponse'
  'trait:badRequest:400':
    description: Bad Request
    schema:
      $ref: '#/definitions/BadRequestResponse'
  'trait:fetchedList:200':
    description: Fetch a transactions list
    schema:
      type: object
      required:
        - has_more
        - data
      properties:
        has_more:
          type: boolean
          example: true
        data:
          type: array
          items:
            required:
              - subtotalIVA0
              - date
              - lastFourDigitsOfCard
              - transactionStatus
              - transactionId
              - voidedBy
              - merchantName
              - cardHolderName
              - approvedTransactionAmount
              - numberOfMonths
              - extraTaxes
              - saleTicketNumber
              - ivaValue
              - isDeferred
              - ticketNumber
              - id
              - dateAndTimeTransaction
              - cardType
              - subtotalIVA
              - requestAmount
              - currencyCode
              - transactionType
              - processorName
              - iceValue
              - merchantId
              - processorBankName
              - approvalCode
            properties:
              subtotalIVA0:
                type: number
                example: 10
              date:
                type: string
                example: '2017-03-24T18:52:34.000Z'
              lastFourDigitsOfCard:
                type: string
                example: 1234
              transactionStatus:
                type: string
                example: APPROVAL
              transactionId:
                type: string
                example: 1234567890987654
              voidedBy:
                type: string
                example: 10334120439012934
              merchantName:
                type: string
                example: Some_Merchant_Name
              cardHolderName:
                type: string
                example: John Doe
              approvedTransactionAmount:
                type: string
                example: 135.5
              numberOfMonths:
                type: string
                example: 0
              ExtraTaxes:
                type: array
                items:
                  required:
                    - tasaAeroportuaria
                    - agenciaDeViaje
                    - iac
                  properties:
                    tasaAeroportuaria:
                      type: object
                      properties:
                        taxid:
                          type: string
                          example: '4'
                        taxAmount:
                          type: string
                          example: 2
                        taxName:
                          type: string
                          example: TASA_AERO
                    iac:
                      type: object
                      properties:
                        taxid:
                          type: string
                          example: '5'
                        taxAmount:
                          type: string
                          example: 2
                        taxName:
                          type: string
                          example: IAC
                    agenciaDeViaje:
                      type: object
                      properties:
                        taxid:
                          type: string
                          example: '6'
                        taxAmount:
                          type: string
                          example: 2
                        taxName:
                          type: string
                          example: TASA_ADMIN_AGEN_COD
              saleTicketNumber:
                type: string
                example: 1204493249523
              ivaValue:
                type: integer
                example: 15.5
              isDeferred:
                type: string
                example: 'Y'
              ticketNumber:
                type: string
                example: 1234567890987654
              id:
                type: string
                example: '123456'
              dateAndTimeTransaction:
                type: string
                example: 12345012469
              cardType:
                type: string
                example: Master Card
              subtotalIVA:
                type: number
                example: 10
              requestAmount:
                type: string
                example: 130
              currencyCode:
                type: string
                example: USD
              transactionType:
                type: string
                example: SALE
              processorName:
                type: string
                example: Some_Processor_Name
              iceValue:
                type: number
                example: 10
              merchantId:
                type: string
                example: 1200000432450023
              processorBankName:
                type: string
                example: Some_Bank_Name
              approvalCode:
                type: string
                example: 342347
              Metadata:
                type: object
                properties:
                  key1:
                    type: string
                    example: value1
              subscription_metadata:
                type: object
                properties:
                  key2:
                    type: string
                    example: value2
    examples:
      example-1:
        has_more: true
        data:
          - subtotalIVA0: 10
            date: '2017-03-24T18:52:34.000Z'
            lastFourDigitsOfCard: 1234
            transactionStatus: APPROVAL
            transactionId: 1234567890987654
            voidedBy: 10334120439012934
            merchantName: Some_Merchant_Name
            cardHolderName: John Doe
            approvedTransactionAmount: 135.5
            numberOfMonths: 0
            ExtraTaxes:
              - tasaAeroportuaria:
                  taxid: '4'
                  taxAmount: 2
                  taxName: TASA_AERO
                iac:
                  taxid: '5'
                  taxAmount: 2
                  taxName: IAC
                agenciaDeViaje:
                  taxid: '6'
                  taxAmount: 2
                  taxName: TASA_ADMIN_AGEN_COD
            saleTicketNumber: 1204493249523
            ivaValue: 15.5
            isDeferred: 'Y'
            ticketNumber: 1234567890987654
            id: '123456'
            dateAndTimeTransaction: 12345012469
            cardType: Master Card
            subtotalIVA: 10
            requestAmount: 130
            currencyCode: USD
            transactionType: SALE
            processorName: Some_Processor_Name
            iceValue: 10
            merchantId: 1200000432450023
            processorBankName: Some_Bank_Name
            approvalCode: 342347
            Metadata:
              key1: value1
            subscription_metadata:
              key2: value2
  'trait:created:201':
    description: Created
    schema:
      type: object
      required:
        - ticketNumber
      properties:
        ticketNumber:
          type: string
          example: '123456789012345678'
    examples:
      example-1:
        ticketNumber: '123456789012345678'
  'trait:unexpectedError:500':
    description: Unexpected Error
    schema:
      $ref: '#/definitions/UnexpectedErrorResponse'
  'trait:tokenCreated:201':
    description: TokenCreated
    schema:
      type: object
      required:
        - token
      properties:
        token:
          type: string
          example: AbCDef123456Z7Ghi8901234jkLMNopQ
definitions: {}
